<!-- src/index.html -->
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Job Board Local Test</title>

    <!-- DataTables basic styling; replace with your theme if preferred -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" />

    <link rel="stylesheet" href="./css/jobs.css" />
  </head>

  <body>
    <div id="jobs-container">
      <h1>Job Openings</h1>
      <table id="jobs-table" class="display"></table>

      <div id="jobs-details"></div>
    </div>

    <!-- jQuery and DataTables -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

    <!-- Application scripts -->
    <script src="./core/jobs-core.js"></script>
    <script src="./ui/jobs-ui.js"></script>
    <script src="./sp/jobs-sp.js"></script>

    <script>
      (function () {
        "use strict";

        var dataService = JobsApp.DataService.create(jQuery, JobsCore);
        var ui = JobsApp.UI.create(jQuery, JobsCore);

        // Local URL to sample data
        var dataUrl = "./data/jobs.txt";

        // Using DataService to load jobs, then initializing UI
        dataService
          .getJobs(dataUrl)
          .then(function (jobs) {
            ui.init({
              tableSelector: "#jobs-table",
              jobs: jobs,
              detailsContainerSelector: "#jobs-details"
            });
          })
          .fail(function (err) {
            console.error("Failed to load jobs:", err);
            alert("Failed to load jobs. See console for details.");
          });
      })();
    </script>
  </body>
</html>
